## TCP
### TCP三次握手
#### 1. 第一次握手
客户端向服务器端发送连接请求,SYN=1,客户端进入SYN-SENT状态。
#### 2. 第二次握手
服务器同意连接，向客户端发送SYN=1、ACK=1，进入SYN-RECEIVED状态。
#### 3. 第三次握手
客户端发送确认报文，ACK=1。ESTABLISHED状态，连接建立。

*SYN=1报文段不能携带数据，但会消耗一个序号，而ACK可以*

### TCP为什么三次握手
防止由于网络原因超时等情况造成的失效的连接请求报文段被服务器端接收，造成错误，资源浪费。

### TCP四次挥手
#### 1. 第一次握手
客户端向服务器端发送连接释放请求，FIN=1
#### 2. 第二次握手
服务器端收到请求，发送ACK=1，且释放客户端到服务器端的连接，不再接收，但仍继续发送，CLOSE-WAIT状态。
#### 3. 第三次握手
服务器端发完要发的数据后，向客户端发送连接释放请求，FIN=1，服务器端进入LAST-ACK状态。
#### 4. 第四次握手
客户端接到释放请求后，发送确认ACK=1，进入TIME-WAIT状态，持续2MSL

*等待2MSL的意义：保证客户端发送的最后一个ACK能够到达服务端，即让服务端能正常关闭；防止已失效的连接请求报文段出现在本连接中*

### TCP解决数据丢包/报文顺序不对
TCP的ARQ超时重传机制
- 停止等待ARQ
- 连续ARQ

### TCP拥塞控制
- 慢开始
- 拥塞避免
- 快重传
- 快恢复